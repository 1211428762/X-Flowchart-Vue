webpackJsonp([1],{"+skl":function(t,e){},"/UwT":function(t,e){},"1H4q":function(t,e){},"1dWW":function(t,e){},"1rAC":function(t,e){},"2X7T":function(t,e){},BX5h:function(t,e){},ISiT:function(t,e){},LzEI:function(t,e){},NCGg:function(t,e){},QDuJ:function(t,e){},SrUm:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){var e=n("7+uW"),o=n("pwV8"),a=n("lVK7");e.default.use(a.a);let i=t&&!1;e.default.config.debug=i,e.default.config.devtools=i,e.default.config.productionTip=i,new e.default({render:t=>t(o.a)}).$mount("#app")}.call(e,n("W2nU"))},WBXe:function(t,e){},XSR4:function(t,e){},ZC6U:function(t,e){},axXu:function(t,e){},bSvY:function(t,e){},hVG5:function(t,e){},k7bG:function(t,e){},lVK7:function(t,e,n){"use strict";var o=n("BTaQ"),a=(n("+skl"),n("NCGg"),{name:"XFCHandler",props:{mode:{type:String,validator:function(t){return["horizontal","vertical"].includes(t)},default:"vertical"},position:{type:String,validator:function(t){return["top","right","bottom","left"].includes(t)},default:"right"},expand:{type:Boolean,default:!0},callback:{type:Function}},computed:{className:function(){return["xfc_handler",this.mode,this.position,this.expand]}},methods:{toggleHandler:function(){this.callback&&this.callback()}}}),i={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,on:{click:this.toggleHandler}})},staticRenderFns:[]};var s=n("VU/8")(a,i,!1,function(t){n("axXu")},"data-v-02bde4f2",null).exports,r=n("Dd8w"),c=n.n(r),l=n("7+uW"),p=new l.default,u=n("pFYg"),d=n.n(u),f=n("fZjL"),h=n.n(f);function g(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function m(t,e){return g(t)===g(e)}var v={getType:g,isSameType:m,getTypeIndex:function(t,e){if(!Array.isArray(e))return m(e,t)?0:-1;for(var n=0,o=e.length;n<o;n++)if(m(e[n],t))return n;return-1},mergeObject:function(t,e){return function t(e,n){var o=h()(e);return o.length&&o.map(function(o){var a=e[o];n.hasOwnProperty(o)&&(void 0===a?"undefined":d()(a))===d()(n[o])&&("object"!==(void 0===a?"undefined":d()(a))||"object"===(void 0===a?"undefined":d()(a))&&a instanceof Array?e[o]=n[o]:"object"===(void 0===a?"undefined":d()(a))&&"object"===(void 0===n?"undefined":d()(n))&&(e[o]=t(a,n[o])))}),e}(t,e)}},y=c()({bus:p},v),x={name:"XFCAddProjectModal",data:function(){return{isShow:!1,formData:{name:"",type:"",width:0,height:0},formRules:{name:{required:!0,trigger:"change"}},typeMap:{pc:{key:"pc",val:"pc",icon:"monitor",width:960,height:1e3},mobile:{key:"mobile",val:"mobile",icon:"iphone",width:376,height:667}}}},watch:{"formData.type":function(t){var e=this.typeMap[t],n=e.width,o=e.height;this.formData=c()({},this.formData,{width:n,height:o})}},methods:{init:function(){this.formData={name:"",type:"pc",width:this.typeMap.pc.width,height:this.typeMap.pc.height}},handleOK:function(){var t=this,e=!1;if(t.$refs.addProjectForm.validate(function(n){e=n,n||t.$Message.error("表单验证失败！")}),console.log("validResult",e),!e)return!1;t.isShow=!1;var n=(new Date).getTime(),o=c()({},t.formData,{width:t.formData.width+"px",height:t.formData.height+"px",id:"project-"+n,components:[],selectionStyleMap:{}});y.bus.$emit("XFC/project/add/ok",o),t.$nextTick(function(){t.init()})},handleCancel:function(){this.isShow=!1}},created:function(){var t=this;t.init(),y.bus.$on("XFC/project/add",function(){t.isShow=!0})}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("XUIModal",{staticClass:"xfc_add-project-modal",attrs:{value:t.isShow,title:"新建项目",transfer:!1},on:{"on-ok":t.handleOK,"on-cancel":t.handleCancel}},[n("XUIForm",{ref:"addProjectForm",attrs:{model:t.formData,rules:t.formRules,"label-width":120},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}}},[n("XUIFormItem",{attrs:{label:"项目名称：",prop:"name"}},[n("XUIInput",{staticStyle:{width:"300px"},attrs:{type:"text",placeholder:"请输入项目名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),n("XUIFormItem",{attrs:{label:"模式：",prop:"type"}},[n("XUIRadioGroup",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.typeMap,function(e,o){return n("XUIRadio",{key:o,attrs:{label:o}},[n("XUIIcon",{attrs:{type:e.icon}}),t._v(" "),n("span",[t._v(t._s(e.val))])],1)}))],1),t._v(" "),n("XUIFormItem",{attrs:{label:"width：",prop:"width"}},[n("XUIInputNumber",{model:{value:t.formData.width,callback:function(e){t.$set(t.formData,"width",e)},expression:"formData.width"}}),t._v(" "),n("span",[t._v("px")])],1),t._v(" "),n("XUIFormItem",{attrs:{label:"height：",prop:"height"}},[n("XUIInputNumber",{model:{value:t.formData.height,callback:function(e){t.$set(t.formData,"height",e)},expression:"formData.height"}}),t._v(" "),n("span",[t._v("px")])],1)],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("XUIButton",{attrs:{type:"text",size:"large"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("XUIButton",{attrs:{type:"primary",size:"large"},on:{click:t.handleOK}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var C=n("VU/8")(x,b,!1,function(t){n("BX5h")},null,null).exports,_=n("bOdI"),X=n.n(_),M={name:"XFCTabList",data:function(){return{tabMap:{},currentActive:"",currentTarget:"",isShow:!1}},methods:{handleClose:function(t){this.isShow=!0,this.currentTarget=t},handleCloseCurrentTarget:function(){var t=this,e=t.currentTarget;if(t.currentActive===e.id){var n=h()(t.tabMap);if(n&&n.length>1){var o=n.indexOf(e.id);t.currentActive=n[o-1]}else t.currentActive="";y.bus.$emit("XFC/project/trigger",t.currentActive)}delete t.tabMap[e.id],y.bus.$emit("XFC/project/remove",e.id),t.currentTarget=""},handleTrigger:function(t){this.currentActive=t.id,y.bus.$emit("XFC/project/trigger",this.currentActive)},handleOK:function(){this.handleCloseCurrentTarget(),this.isShow=!1},handleCancel:function(){this.currentTarget="",this.isShow=!1}},created:function(){var t=this;y.bus.$on("XFC/project/add/ok",function(e){t.tabMap=c()({},t.tabMap,X()({},e.id,e)),t.currentActive=e.id})}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xfc_tab_list"},[t._l(t.tabMap,function(e){return n("div",{key:e.id,class:["tab_item",t.currentActive===e.id?"active":""],attrs:{"project-id":e.id,name:e.name,title:e.name},on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.handleTrigger(e)}}},[n("div",{staticClass:"title"},[t._v(" "+t._s(e.name))]),t._v(" "),n("div",{staticClass:"close",on:{click:function(n){n.stopPropagation(),n.preventDefault(),t.handleClose(e)}}},[n("XUIIcon",{attrs:{type:"close"}})],1)])}),t._v(" "),n("XUIModal",{staticClass:"xfc_add-project-modal",attrs:{value:t.isShow,title:"提示",transfer:!1},on:{"on-ok":t.handleOK,"on-cancel":t.handleCancel}},[n("div",{staticClass:"content"},[t._v("\n      删除项目会清空该项目的所有数据，确认删除项目吗？\n    ")]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("XUIButton",{attrs:{type:"text",size:"large"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("XUIButton",{attrs:{type:"primary",size:"large"},on:{click:t.handleOK}},[t._v("确定")])],1)])],2)},staticRenderFns:[]};var F={namespace:"XFC",UI:{header:{enable:!0,title:{enable:!0,text:"XFC",fullText:"X-Page-Editor",subText:"x-page-editor"},data:[],initData:[]},list:{enable:!0,data:[],initData:[],style:{width:"400px","margin-left":"-400px"}},board:{enable:!0,data:[],initData:[],toolBar:{enable:!0,position:"top-right",style:{right:"450px"}},scale:{enable:!0}},options:{enable:!0,data:[],initData:[],style:{width:"400px","margin-right":"-400px"}},footer:{enable:!0,data:[],initData:[]}},output:{before:function(){},after:function(){}}},I={name:"XFCHeader",components:{XFCHandler:s,XFCAddProjectModal:C,XFCTabList:n("VU/8")(M,w,!1,function(t){n("k7bG")},"data-v-17d83472",null).exports},props:{config:{type:Object,default:function(){return F.UI.header}}},data:function(){return{isExpand:!0,tabList:[]}},methods:{toggleHandler:function(t){var e=this;e.isExpand=void 0!==t?t:!e.isExpand,e.$nextTick(function(){var t=e.isExpand?e.$el.offsetHeight:0;y.bus.$emit("XFC/expand/toggle/single",{position:"top",val:{top:t}})})},handleAction:function(t){console.log("handleAction",t);switch(t){case"addProject":y.bus.$emit("XFC/project/add")}}},created:function(){var t=this;y.bus.$on("XFC/expand/toggle/all",function(e){t.toggleHandler(e)})}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{xfc_header:!0,block_expand:t.isExpand}},[t.config.title.enable?n("div",{staticClass:"block_header"},[n("div",{staticClass:"title"},[t._v(t._s(t.config.title.text))])]):t._e(),t._v(" "),n("div",{staticClass:"block_body"},[n("div",{staticClass:"tab-group"},[n("XFCTabList")],1),t._v(" "),n("div",{staticClass:"btn-group"},[n("XUIButton",{staticClass:"btn-item",attrs:{type:"text"},on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{click:function(e){e.stopPropagation(),e.preventDefault(),t.handleAction("addProject")}}},[n("XFCIcon",{attrs:{type:"add-circle",title:"新建项目"}})],1),t._v(" "),n("XUIButton",{staticClass:"btn-item",attrs:{type:"text"},on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{click:function(e){e.stopPropagation(),e.preventDefault(),t.handleAction("ui")}}},[n("XFCIcon",{attrs:{type:"ui",title:"UI"}})],1),t._v(" "),n("XUIButton",{staticClass:"btn-item",attrs:{type:"text"},on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{click:function(e){e.stopPropagation(),e.preventDefault(),t.handleAction("preview")}}},[n("XFCIcon",{attrs:{type:"preview",title:"预览"}})],1)],1)]),t._v(" "),n("XFCHandler",{staticClass:"handler",attrs:{mode:"horizontal",position:"bottom",expand:t.isExpand,callback:t.toggleHandler}}),t._v(" "),n("XFCAddProjectModal")],1)},staticRenderFns:[]};var T=n("VU/8")(I,k,!1,function(t){n("ll1s")},"data-v-20a61c98",null).exports,j={name:"XFCList",components:{XFCHandler:s},props:{config:{type:Object,default:function(){return F.UI.list}}},data:function(){return{isExpand:!0}},computed:{computedStyle:function(){return c()({},this.config.style,{"margin-left":this.isExpand?0:this.config.style["margin-left"]})}},methods:{toggleHandler:function(t){var e=this;e.isExpand=void 0!==t?t:!e.isExpand,e.$nextTick(function(){var t=e.isExpand?e.$el.offsetWidth:0;y.bus.$emit("XFC/expand/toggle/single",{position:"left",val:{left:t}})})}},created:function(){var t=this;console.log("List Config::",t.config),y.bus.$on("XFC/expand/toggle/all",function(e){t.toggleHandler(e)})}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{xfc_list:!0,block_expand:t.isExpand},style:t.computedStyle},[t._m(0),t._v(" "),n("div",{staticClass:"block_body"},[t._t("default")],2),t._v(" "),n("XFCHandler",{staticClass:"handler",attrs:{mode:"vertical",position:"right",expand:t.isExpand,callback:t.toggleHandler}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"block_header"},[e("div",{staticClass:"title"},[this._v("\n      资源列表\n    ")])])}]};var $=n("VU/8")(j,P,!1,function(t){n("qy2H")},"data-v-1c14d406",null).exports,D={name:"XFCToolBar",props:{config:{type:Object,default:function(){return F.UI.board.toolBar}},expand:{type:Boolean,default:!0}},data:function(){var t=this;return{defBarList:[{name:"expand",text:"展开",icon:"expand",category:"expand",enable:!0,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!1},toolTip:{enable:!1,content:""}},{name:"fold",text:"折叠",icon:"fold",category:"expand",enable:!0,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!0},toolTip:{enable:!1,content:""}},{name:"zoom-in",text:"放大",icon:"zoom-in",category:"zoom",enable:!0,action:{type:"bus",handler:"XFC/canvas/zoom",params:{type:"zoom-in",callback:function(e){t.handleToolTipContent("zoom",e)}}},toolTip:{enable:!0,content:""}},{name:"zoom-reset",text:"还原",icon:"zoom",category:"zoom",enable:!0,action:{type:"bus",handler:"XFC/canvas/zoom",params:{type:"zoom-reset",callback:function(e){t.handleToolTipContent("zoom",e)}}},toolTip:{enable:!0,content:""}},{name:"zoom-out",text:"缩小",icon:"zoom-out",category:"zoom",enable:!0,action:{type:"bus",handler:"XFC/canvas/zoom",params:{type:"zoom-out",callback:function(e){t.handleToolTipContent("zoom",e)}}},toolTip:{enable:!0,content:""}}],barList:[],defStyle:{"top-left":{top:"100px",left:"450px"},"top-right":{top:"100px",right:"450px"},"bottom-right":{bottom:"100px",right:"450px"},"bottom-left":{bottom:"100px",left:"450px"}},style:{},distance:50,toolTip:{placement:{"top-left":"right","top-right":"left","bottom-right":"left","bottom-left":"right"}}}},watch:{expand:function(t){console.log("isExpand",t),this.handleBarList(t)}},methods:{init:function(){var t=this;t.style=c()({},t.defStyle[t.config.position],t.config.style),t.handleBarList(t.expand)},handleBarList:function(t){var e=this.defBarList.filter(function(e){if("expand"!==e.category)return e;if(t){if("expand"===e.name)return e}else if("fold"===e.name)return e});this.barList=e},triggerBarItem:function(t){if(console.log("triggerBarItem",t.text,t.name),t&&t.action&&t.action.type)switch(t.action.type){case"bus":console.log("info.action.handler",t.action.handler),y.bus.$emit(t.action.handler,t.action.params)}},handleToolTipContent:function(t,e){this.barList.map(function(n){return n.category===t&&(n.toolTip.content=e),n})}},created:function(){var t=this;t.init(),y.bus.$on("XFC/expand/toggle/single",function(e){var n={};if(e&&e.position){switch(t.config.position){case"top-left":"top"===e.position?n={top:e.val.top+t.distance+"px",left:t.style.left}:"left"===e.position&&(n={top:t.style.top,left:e.val.left+t.distance+"px"});break;case"top-right":"top"===e.position?n={top:e.val.top+t.distance+"px",right:t.style.right}:"right"===e.position&&(n={top:t.style.top,right:e.val.right+t.distance+"px"});break;case"bottom-right":"bottom"===e.position?n={bottom:e.val.bottom+t.distance+"px",right:t.style.right}:"right"===e.position&&(n={bottom:t.style.bottom,right:e.val.right+t.distance+"px"});break;case"bottom-left":"bottom"===e.position?n={bottom:e.val.bottom+t.distance+"px",left:t.style.left}:"left"===e.position&&(n={bottom:t.style.bottom,left:e.val.left+t.distance+"px"})}h()(n).length&&(t.style=n)}})}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xfc_tool-bar",style:t.style,on:{dblclick:function(t){t.stopPropagation(),t.preventDefault()},contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation(),t.preventDefault()}}},[n("div",{staticClass:"bar-list"},t._l(t.barList,function(e,o){return e.enable?n("div",{key:o,staticClass:"bar-item",on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(t){t.stopPropagation(),t.preventDefault()},click:function(n){n.stopPropagation(),n.preventDefault(),t.triggerBarItem(e)}}},[e.toolTip&&e.toolTip.enable&&e.toolTip.content?n("XUITooltip",{attrs:{transfer:"",placement:t.toolTip.placement[t.config.position],content:e.toolTip.content}},[n("XFCIcon",{attrs:{type:e.icon,title:e.text}})],1):n("XFCIcon",{attrs:{type:e.icon,title:e.text}})],1):t._e()}))])},staticRenderFns:[]};var O=n("VU/8")(D,U,!1,function(t){n("ZC6U")},"data-v-a716f38e",null).exports,S={name:"XFCScale",props:{config:{type:Object,default:function(){return F.UI.board.scale}},width:{type:Number,default:0},height:{type:Number,default:0}},data:function(){return{scaleList:{x:[],y:[]},guidesMap:{},currentProject:"",zoom:{current:0,max:5,min:-5}}},watch:{width:function(t){console.log("width",t);this.computeScaleList("x",t)},height:function(t){console.log("height",t);this.computeScaleList("y",t)}},methods:{computeScaleList:function(t,e){var n=Math.ceil(e/50),o=[];if("x"===t){for(var a=0;a<n;a++)o.push({style:{left:50*a+2+"px"},text:50*a});this.scaleList.x=o}else if("y"===t){for(var i=0;i<n;i++)o.push({style:{top:50*i+2+"px"},text:50*i});this.scaleList.y=o}},handleMouseDownOnScale:function(t,e){if(h()(this.guidesMap).length&&this.currentProject){var n=["guides",t,(new Date).getTime()].join("_");y.bus.$emit("XFC/scale/guides/drag/start",{key:n,type:t,status:{start:!0,move:!1,end:!1},position:{start:{x:e.offsetX,y:e.offsetY}},condition:{draw:function(t,e,n){return"x"===t?e.y-n.y>5:"y"===t?e.x-n.x>5:void 0}}})}else console.warn("Notice::请先创建项目！")},handleMouseDownOnGuides:function(t,e){y.bus.$emit("XFC/scale/guides/drag/start",{key:t.key,type:t.type,status:{start:!0,move:!1,end:!1},position:{start:{x:e.offsetX,y:e.offsetY}},condition:{draw:function(t,e,n){return"x"===t?e.y-n.y>5:"y"===t?e.x-n.x>5:void 0}}})},handleGuidesMove:function(t){var e=this;if(t.status.start&&t.status.move)if(h()(e.guidesMap).length&&e.currentProject){e.guidesMap[e.currentProject].showGuides=!0;var n={x:e.guidesMap[e.currentProject].x,y:e.guidesMap[e.currentProject].y},o=(new Date).getTime();t.key=t.key||["guides",t.type,o].join("_");var a=t.position.move.x+"px",i=t.position.move.y+"px";"x"===t.type?n[t.type][t.key]={key:t.key,type:t.type,text:i,style:{top:i},toolTip:{text:i,style:{display:"inline-block",left:a}}}:"y"===t.type&&(n[t.type][t.key]={key:t.key,type:t.type,text:a,style:{left:a},toolTip:{text:a,style:{display:"inline-block",top:i}}}),e.guidesMap[e.currentProject]=c()({},e.guidesMap[e.currentProject],n)}else console.warn("Notice::请先创建项目！")},handleRightClick:function(t){var e=this;if(h()(e.guidesMap).length&&e.currentProject){var n=document.querySelector("#xfc"),o=void 0,a=void 0;n?(o=t.clientX-n.offsetLeft,a=t.clientY-n.offsetTop):(o=t.offsetX,a=t.offsetY);var i={isShow:!0,x:o,y:a,target:"XFC_board",list:[{name:"showGuides",icon:{type:"",style:"",category:"iconfont"},text:e.guidesMap[e.currentProject].showGuides?"隐藏参考线":"显示参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toggle"}},{name:"showToolTip",icon:{type:"",style:"",category:"iconfont"},text:e.guidesMap[e.currentProject].showToolTip?"隐藏参考线坐标":"显示参考线坐标",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toolTip/toggle"}}]};y.bus.$emit("XFC/contextMenu/show",i)}else console.warn("Notice::请先创建项目！")},toggleToolTip:function(){var t=this;if(h()(t.guidesMap).length&&t.currentProject){var e={x:t.guidesMap[t.currentProject].x,y:t.guidesMap[t.currentProject].y};h()(e).map(function(n){h()(e[n]).map(function(o){e[n][o].toolTip.style=c()({},e[n][o].toolTip.style,{display:t.guidesMap[t.currentProject].showToolTip?"inline-block":"none"})})}),t.guidesMap[t.currentProject]=c()({},t.guidesMap[t.currentProject],e)}else console.warn("Notice::请先创建项目！")},clearGuidesByProject:function(t){this.guidesMap=c()({},this.guidesMap,X()({},t,c()({},this.guidesMap[t],{x:{},y:{}})))}},created:function(){var t=this;y.bus.$on("XFC/scale/guides/drag/move",function(e){t.handleGuidesMove(e)}),y.bus.$on("XFC/scale/guides/drag/stop",function(e){e.status.start||e.status.move||!e.status.end||t.toggleToolTip()}),y.bus.$on("XFC/board/clear",function(){t.guidesMap={}}),y.bus.$on("XFC/canvas/clear",function(e){t.clearGuidesByProject(e)}),y.bus.$on("XFC/scale/guides/clear",function(e){t.clearGuidesByProject(e)}),y.bus.$on("XFC/scale/guides/toggle",function(){h()(t.guidesMap).length&&t.currentProject?t.guidesMap[t.currentProject].showGuides=!t.guidesMap[t.currentProject].showGuides:console.warn("Notice::请先创建项目！")}),y.bus.$on("XFC/scale/guides/toolTip/toggle",function(){h()(t.guidesMap).length&&t.currentProject?(t.guidesMap[t.currentProject].showToolTip=!t.guidesMap[t.currentProject].showToolTip,t.toggleToolTip()):console.warn("Notice::请先创建项目！")}),y.bus.$on("XFC/project/add/ok",function(e){t.guidesMap=c()({},t.guidesMap,X()({},e.id,{x:{},y:{},showGuides:!0,showToolTip:!1})),t.currentProject=e.id}),y.bus.$on("XFC/project/trigger",function(e){t.currentProject=e}),y.bus.$on("XFC/project/remove",function(e){delete t.guidesMap[e]})}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xfc_scale"},[n("div",{staticClass:"scale_x",style:{width:t.width+"px"},on:{mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseDownOnScale("x",e)},contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.handleRightClick(e)}}},t._l(t.scaleList.x,function(e,o){return n("div",{key:"scale_x_"+o,staticClass:"scale_item",style:e.style,attrs:{type:e.type}},[t._v("\n      "+t._s(e.text)+"\n    ")])})),t._v(" "),n("div",{staticClass:"scale_y",style:{height:t.height+"px"},on:{mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseDownOnScale("y",e)},contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.handleRightClick(e)}}},t._l(t.scaleList.y,function(e,o){return n("div",{key:"scale_y_"+o,staticClass:"scale_item",style:e.style},[t._v("\n      "+t._s(e.text)+"\n    ")])})),t._v(" "),t._l(t.guidesMap,function(e,o){return Object.keys(t.guidesMap).length&&t.currentProject?[t._l(e.x,function(a){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentProject===o&&e.showGuides,expression:"currentProject === projectID && guidesMapByProject.showGuides"}],key:a.key,staticClass:"guides_x",style:[{width:t.width+"px"},a.style],attrs:{guides_key:a.key,project_id:o,title:a.text,type:a.type},on:{mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseDownOnGuides(a,e)}}},[n("div",{staticClass:"toolTip",style:a.toolTip.style},[t._v(t._s(a.toolTip.text))])])}),t._v(" "),t._l(e.y,function(a){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentProject===o&&e.showGuides,expression:"currentProject === projectID && guidesMapByProject.showGuides"}],key:a.key,staticClass:"guides_y",style:[{height:t.height+"px"},a.style],attrs:{guides_key:a.key,project_id:o,title:a.text,type:a.type},on:{mousedown:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseDownOnGuides(a,e)}}},[n("div",{staticClass:"toolTip",style:a.toolTip.style},[t._v(t._s(a.toolTip.text))])])})]:t._e()})],2)},staticRenderFns:[]};var N=n("VU/8")(S,E,!1,function(t){n("ISiT")},"data-v-bcfd6c1a",null).exports,H=n("mvHQ"),L=n.n(H),B={name:"NestNoticeModal",data:function(){return{isShow:!1}},methods:{handleCancel:function(){this.isShow=!1}},created:function(){var t=this;y.bus.$on("XFC/canvas/nest/notice",function(){t.isShow=!0})}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("XUIModal",{staticClass:"xfc_nest-notice-modal",attrs:{value:this.isShow,title:"提示",transfer:!1},on:{"on-cancel":this.handleCancel}},[e("div",{staticClass:"content"},[this._v("该节点不支持嵌套！")]),this._v(" "),e("div",{attrs:{slot:"footer"},slot:"footer"},[e("XUIButton",{attrs:{type:"text",size:"large"},on:{click:this.handleCancel}},[this._v("关闭")])],1)])},staticRenderFns:[]};var z={name:"XFCCanvas",components:{NestNoticeModal:n("VU/8")(B,R,!1,function(t){n("LzEI")},"data-v-2213352a",null).exports},data:function(){return{isExpand:!0,canvasMap:{},currentProject:"",currentNode:"",scale:{default:1,current:1,max:10,min:.1,step:.01}}},methods:{handleRightClickOnCanvas:function(t){var e=document.querySelector("#xfc"),n=void 0,o=void 0;e?(n=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop):(n=t.offsetX,o=t.offsetY);var a={isShow:!0,x:n,y:o,target:"XFC_canvas",list:[{name:"expand",icon:{type:"icon-expand",style:"",category:"iconfont"},text:"展开",enable:this.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!1}},{name:"fold",icon:{type:"icon-fold",style:"",category:"iconfont"},text:"折叠",enable:!this.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!0}},{name:"showGuides",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toggle"}},{name:"showToolTip",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线坐标",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toolTip/toggle"}},{name:"clearGuides",icon:{type:"",style:"",category:"iconfont"},text:"清空当前项目参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/clear",params:this.currentProject}},{name:"clear",icon:{type:"",style:"",category:"iconfont"},text:"清空当前项目画布",enable:!0,action:{type:"bus",handler:"XFC/canvas/clear",params:this.currentProject}}]};y.bus.$emit("XFC/contextMenu/show",a)},handleRightClickOnNode:function(t,e){var n=this,o=document.querySelector("#xfc"),a=void 0,i=void 0;o?(a=e.clientX-o.offsetLeft,i=e.clientY-o.offsetTop):(a=e.offsetX,i=e.offsetY);var s={isShow:!0,x:a,y:i,target:"XFC_canvas_node",list:[{name:"expand",icon:{type:"icon-expand",style:"",category:"iconfont"},text:"展开",enable:n.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!1}},{name:"fold",icon:{type:"icon-fold",style:"",category:"iconfont"},text:"折叠",enable:!n.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!0}},{name:"showGuides",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toggle"}},{name:"showToolTip",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线坐标",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toolTip/toggle"}},{name:"clearGuides",icon:{type:"",style:"",category:"iconfont"},text:"清空当前项目参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/clear",params:n.currentProject}},{name:"clear",icon:{type:"",style:"",category:"iconfont"},text:"清空当前项目画布",enable:!0,action:{type:"bus",handler:"XFC/canvas/clear",params:n.currentProject}},{name:"edit",icon:{type:"edit",style:"",category:"iview"},text:"编辑",enable:!0,action:{type:"callback",handler:n.handleComponentTrigger,params:t}},{name:"remove",icon:{type:"android-remove",style:"",category:"iview"},text:"删除",enable:!0,action:{type:"callback",handler:n.handleComponentRemove,params:t}}]};y.bus.$emit("XFC/contextMenu/show",s)},handleComponentTrigger:function(t){var e=this;e.currentNode=t.id,y.bus.$emit("XFC/project/component/trigger",t),e.$nextTick(function(){e.handleMouseOverOnNode(t),e.handleMouseOutOnNode()})},handleComponentRemove:function(t){var e=this;e.currentNode="";var n=e.canvasMap;e.canvasMap[e.currentProject].components=n[e.currentProject].components.filter(function(e){return e.id!==t.id}),console.log("canvasMap",n),y.bus.$emit("XFC/project/component/remove",t),e.$nextTick(function(){e.handleMouseOutOnNode()})},handleDropOnCanvas:function(t,e){var n=this;console.log("handleDropOnCanvas");var o=n.canvasMap,a=JSON.parse(e.dataTransfer.getData("node"));a=c()({id:"",components:{},props:{},slots:{},innerHTML:""},a);var i={position:"absolute","pointer-events":"auto",left:e.offsetX+"px",top:e.offsetY+"px"};if(a.style=c()({},a.style,i),o[t.id].components.length){var s=o[t.id].components.findIndex(function(t){return t.id===a.id});s>-1?o[t.id].components[s]=a:o[t.id].components.push(a)}else o[t.id].components.push(a);n.canvasMap=c()({},o),n.currentNode=a.id,y.bus.$emit("XFC/project/component/trigger",a),n.$nextTick(function(){n.handleMouseOverOnNode(a),n.handleMouseOutOnNode()})},handleDropOnNode:function(t,e){var n=this;console.log("handleDropOnNode");var o=n.canvasMap,a=JSON.parse(e.dataTransfer.getData("node"));a=c()({id:"",components:{},props:{},slots:{},innerHTML:""},a);var i=!1,s=t.component.nest||{enable:!1,parent:{allow:[],deny:[]},children:{allow:[],deny:[]}},r=a.component.nest||{enable:!1,parent:{allow:[],deny:[]},children:{allow:[],deny:[]}},l=t.component.name,p=a.component.name;if(s.enable&&(s.children.allow.length||s.children.deny.length||r.parent.allow.length||r.parent.deny.length?s.children.allow.length?i=s.children.allow.includes(p)&&!s.children.deny.includes(p):s.children.deny.length?i=!s.children.deny.includes(p):r.parent.allow.length?i=r.parent.allow.includes(l)&&!r.parent.deny.includes(l):r.parent.deny.length&&(i=!r.parent.deny.includes(l)):i=!0),i){var u={position:"absolute","pointer-events":"auto",left:e.offsetX+"px",top:e.offsetY+"px"};a.style=c()({},a.style,u),o[n.currentProject].components=o[n.currentProject].components.filter(function(t){return t.id!==a.id}),o[n.currentProject].components.map(function(e){return e.id===t.id&&(e.hasOwnProperty("children")||(e.children=[]),e.children.push(a)),e}),n.canvasMap=c()({},o),n.$nextTick(function(){n.handleComponentTrigger(a)})}else y.bus.$emit("XFC/canvas/nest/notice")},handleDragStart:function(t,e){e.dataTransfer.setData("node",L()(t))},handleOptionsSet:function(t){var e=this,n=e.canvasMap;n[e.currentProject].components.map(function(e){return e.id===t.id&&(e.props=t.props,e.slots=t.slots,e.innerHTML=t.innerHTML,e.style=t.style),e}),e.canvasMap=c()({},n),e.$nextTick(function(){e.handleMouseOverOnNode(t)})},clearCanvas:function(t){this.canvasMap[t].components=[],this.canvasMap[t].selectionStyleMap={},this.canvasMap[t].scale=c()({},this.scale)},handleMouseOverOnNode:function(t){var e=document.querySelector("[node-id="+t.id+"]");if(e){var n={display:"inline-block",width:e.offsetWidth+2+"px",height:e.offsetHeight+2+"px",margin:"-1px",left:t.style.left,top:t.style.top};this.canvasMap[this.currentProject].selectionStyleMap=c()({},this.canvasMap[this.currentProject].selectionStyleMap,X()({},t.id,n))}},handleMouseOutOnNode:function(){var t=this;if(h()(t.canvasMap[t.currentProject].selectionStyleMap).length){var e=t.canvasMap[t.currentProject].selectionStyleMap;h()(e).map(function(n){n!==t.currentNode&&delete e[n]}),t.canvasMap[t.currentProject].selectionStyleMap=c()({},e)}},handleZoom:function(t){var e=void 0,n=this.canvasMap[this.currentProject];if(n){switch(t.type){case"zoom-in":e=n.scale.current+n.scale.step;break;case"zoom-out":e=n.scale.current-n.scale.step;break;case"zoom-reset":e=n.scale.default}e>n.scale.max?e=n.scale.max:e<n.scale.min?e=n.scale.min:e||(e=n.scale.default),this.canvasMap[this.currentProject].scale.current=e,t.callback(Math.ceil(100*e)+"%")}}},created:function(){var t=this;y.bus.$on("XFC/expand/toggle/all",function(e){t.isExpand=e}),y.bus.$on("XFC/project/add/ok",function(e){t.canvasMap=c()({},t.canvasMap,X()({},e.id,c()({id:"",name:"",type:"pc",width:0,height:0,components:[],selectionStyleMap:{},scale:c()({},t.scale)},e))),t.currentProject=e.id}),y.bus.$on("XFC/project/trigger",function(e){t.currentProject=e}),y.bus.$on("XFC/project/remove",function(e){delete t.canvasMap[e]}),y.bus.$on("XFC/project/component/options/set",function(e){t.handleOptionsSet(e)}),y.bus.$on("XFC/canvas/clear",function(e){t.clearCanvas(e)}),y.bus.$on("XFC/canvas/zoom",function(e){t.handleZoom(e)})}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xfc_canvas"},[t._l(t.canvasMap,function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.currentProject===e.id,expression:"currentProject === item.id"}],key:e.id,class:["canvas-box",t.currentProject===e.id?"active":"","pc"===e.type?"pc":"mobile"===e.type?"mobile":""],style:{width:e.width,height:e.height,transform:"scale("+e.scale.current+","+e.scale.current+")"},attrs:{"project-id":e.id,name:e.name,title:e.name},on:{contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.handleRightClickOnCanvas(e)},drop:function(n){n.stopPropagation(),n.preventDefault(),t.handleDropOnCanvas(e,n)},dragover:function(t){t.stopPropagation(),t.preventDefault()}}},[t._l(e.selectionStyleMap,function(t,e){return n("div",{key:"selection-"+e,staticClass:"selection",style:t,attrs:{"selection-id":"selection-"+e}})}),t._v(" "),t._l(e.components,function(e,o){return[n(e.component.name,t._b({key:o,tag:"component",staticClass:"component-node",style:e.style,attrs:{"node-id":e.id,draggable:"true"},on:{dragover:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{contextmenu:function(n){n.stopPropagation(),n.preventDefault(),t.handleRightClickOnNode(e,n)},click:function(n){n.stopPropagation(),n.preventDefault(),t.handleComponentTrigger(e)},dragstart:function(n){t.handleDragStart(e,n)},mouseover:function(n){n.stopPropagation(),n.preventDefault(),t.handleMouseOverOnNode(e)},mouseout:function(n){n.stopPropagation(),n.preventDefault(),t.handleMouseOutOnNode(e)},drop:function(n){n.stopPropagation(),n.preventDefault(),t.handleDropOnNode(e,n)}}},"component",e.props,!1),[t._v("\n        "+t._s(e.innerHTML)+"\n        "),t._l(e.children,function(o,a){return e.children&&e.children.length?[n(o.component.name,t._b({key:a,tag:"component",staticClass:"component-node",style:o.style,attrs:{"node-id":o.id,draggable:"true"},on:{drop:function(e){e.stopPropagation(),e.preventDefault(),t.handleDropOnNode(o,e)},dragover:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.handleRightClickOnNode(o,e)},click:function(e){e.stopPropagation(),e.preventDefault(),t.handleComponentTrigger(o)},dragstart:function(e){t.handleDragStart(o,e)},mouseover:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseOverOnNode(o)},mouseout:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseOutOnNode(o)}}},"component",o.props,!1))]:t._e()})],2)]})],2)}),t._v(" "),n("NestNoticeModal")],2)},staticRenderFns:[]};var V={name:"XFCBoard",components:{XFCToolBar:O,XFCScale:N,XFCCanvas:n("VU/8")(z,G,!1,function(t){n("2X7T")},null,null).exports},props:{config:{type:Object,default:function(){return F.UI.board}}},data:function(){return{isExpand:!0,boardWidth:0,boardHeight:0,zoom:{current:0,max:5,min:-5},guides:{type:"",status:{start:!1,move:!1,end:!1},position:{start:{x:0,y:0}}}}},methods:{toggleExpand:function(){this.isExpand=!this.isExpand,y.bus.$emit("XFC/expand/toggle/all",this.isExpand)},handleRightClick:function(t){var e=document.querySelector("#xfc"),n=void 0,o=void 0;e?(n=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop):(n=t.offsetX,o=t.offsetY);var a={isShow:!0,x:n,y:o,target:"XFC_board",list:[{name:"expand",icon:{type:"icon-expand",style:"",category:"iconfont"},text:"展开",enable:this.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!1}},{name:"fold",icon:{type:"icon-fold",style:"",category:"iconfont"},text:"折叠",enable:!this.isExpand,action:{type:"bus",handler:"XFC/expand/toggle/all",params:!0}},{name:"showGuides",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toggle"}},{name:"showToolTip",icon:{type:"",style:"",category:"iconfont"},text:"显示 / 隐藏参考线坐标",enable:!0,action:{type:"bus",handler:"XFC/scale/guides/toolTip/toggle"}},{name:"clear",icon:{type:"",style:"",category:"iconfont"},text:"清空编辑器画板",enable:!1,action:{type:"bus",handler:"XFC/board/clear"}}]};y.bus.$emit("XFC/contextMenu/show",a)},handleMouseMoveOnBoard:function(t){var e=this;if(e.guides.status.start&&(e.guides.status.move=!0,e.guides.condition&&e.guides.condition.draw&&"function"==typeof e.guides.condition.draw)){var n=document.querySelector("#xfc"),o=void 0;o=n?{x:t.clientX-n.offsetLeft,y:t.clientY-n.offsetTop}:{x:t.offsetX,y:t.offsetY},e.guides.condition.draw(e.guides.type,o,e.guides.position.start)&&(e.guides.position.move=o,y.bus.$emit("XFC/scale/guides/drag/move",e.guides))}},handleMouseUpOnBoard:function(t){this.guides.status.start=!1,this.guides.status.move=!1,this.guides.status.end=!0,y.bus.$emit("XFC/scale/guides/drag/stop",this.guides)}},created:function(){var t=this;y.bus.$on("XFC/expand/toggle/all",function(e){t.isExpand=e}),y.bus.$on("XFC/scale/guides/drag/start",function(e){t.guides=e})},mounted:function(){var t=this;t.boardWidth=t.$el.offsetWidth,t.boardHeight=t.$el.offsetHeight,console.log("boardWidth",t.$el.offsetWidth,t.$el.offsetHeight)}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{xfc_board:!0,"draw-guides_x":t.guides.status.move&&"x"===t.guides.type,"draw-guides_y":t.guides.status.move&&"y"===t.guides.type},attrs:{id:"xfc_board"},on:{dblclick:function(e){return e.stopPropagation(),e.preventDefault(),t.toggleExpand(e)},contextmenu:function(e){e.stopPropagation(),e.preventDefault(),t.handleRightClick(e)},mousemove:function(e){t.handleMouseMoveOnBoard(e)},mouseup:function(e){e.stopPropagation(),e.preventDefault(),t.handleMouseUpOnBoard(e)}}},[n("div",{staticClass:"block_body"},[n("XFCCanvas")],1),t._v(" "),t.config.toolBar.enable?t._t("toolBar",[n("XFCToolBar",{attrs:{config:t.config.toolBar,expand:t.isExpand}})]):t._e(),t._v(" "),t.config.scale.enable?t._t("scale",[n("XFCScale",{attrs:{config:t.config.scale,width:t.boardWidth,height:t.boardHeight}})]):t._e()],2)},staticRenderFns:[]};var W=n("VU/8")(V,A,!1,function(t){n("WBXe")},"data-v-37acf6bf",null).exports,Y=n("5QVw"),q=n.n(Y),K={name:"XFCOptions",components:{XFCHandler:s},props:{config:{type:Object,default:function(){return F.UI.options}}},data:function(){return{isExpand:!0,nodeInfo:{},propsMap:{},propsMapRules:{},slotsMap:{},optionsMap:{},innerHTML:"",style:"",activePanel:["propsMap","slotsMap","innerHTML","style"],loading:!1,utils:y,vm:null,propsType:{String:String,Number:Number,Boolean:Boolean,Function:Function,Object:Object,Array:Array,Symbol:q.a}}},computed:{computedStyle:function(){return c()({},this.config.style,{"margin-right":this.isExpand?0:this.config.style["margin-right"]})}},watch:{propsMap:{handler:function(t,e){try{if(h()(e).length&&h()(t).length){var n=!1;if(this.$refs.propsMapForm.validate(function(t){console.log("valid",t),n=t,t||console.error("表单验证失败！")}),console.log("propsMapForm validResult",n),!n)return!1;y.bus.$emit("XFC/project/component/options/set",c()({},this.nodeInfo,{props:t}))}}catch(t){console.log("err",t.message)}},deep:!0},slotsMap:{handler:function(t,e){try{h()(e).length&&h()(t).length&&y.bus.$emit("XFC/project/component/options/set",c()({},this.nodeInfo,{slots:t}))}catch(t){console.log("err",t.message)}},deep:!0},innerHTML:{handler:function(t){try{y.bus.$emit("XFC/project/component/options/set",c()({},this.nodeInfo,{innerHTML:t}))}catch(t){console.log("err",t.message)}},deep:!0},style:{handler:function(t){try{var e=t.split("\n"),n={};e.map(function(t){if(t&&t.includes(":")){var e=t.split(":"),o=e[0].trim(),a=e[1].replace(";","").trim();n[o]=a}}),y.bus.$emit("XFC/project/component/options/set",c()({},this.nodeInfo,{style:n}))}catch(t){console.log("err",t.message)}},deep:!0}},methods:{toggleHandler:function(t){var e=this;e.isExpand=void 0!==t?t:!e.isExpand,e.$nextTick(function(){var t=e.isExpand?e.$el.offsetWidth:0;y.bus.$emit("XFC/expand/toggle/single",{position:"right",val:{right:t}})})},compileComponent:function(t){var e=this;e.loading=!0,e.nodeInfo=t,console.log("compileComponent",t);var n=new(l.default.component(t.component.name));e.vm=n,console.log("vm",n,t),console.log("vm $props",n.$props),console.log("vm $slots",n.$slots),e.propsMap=c()({},n.$props,t.props),e.optionsMap=c()({},n.$options,t.options),e.slotsMap=c()({},n.$slots,t.slots),e.innerHTML=t.innerHTML||n.innerHTML;var o=c()({},n.style,t.style),a=[];h()(o).map(function(t){var e=t+":"+o[t]+";";a.push(e)}),e.style=a.join("\n"),e.loading=!1},clearOptions:function(){var t=this;t.nodeInfo={},t.propsMap={},t.slotsMap={},t.innerHTML="",t.style=""}},created:function(){var t=this;y.bus.$on("XFC/expand/toggle/all",function(e){t.toggleHandler(e)}),y.bus.$on("XFC/project/component/trigger",function(e){t.compileComponent(e)}),y.bus.$on("XFC/canvas/clear",function(e){t.clearOptions(e)}),y.bus.$on("XFC/project/component/remove",function(e){t.clearOptions(e)})}},J={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:{xfc_options:!0,block_expand:t.isExpand},style:t.computedStyle},[t._m(0),t._v(" "),n("div",{staticClass:"block_body"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"loading"},[n("XUISpin",{attrs:{size:"large",fix:""}})],1),t._v(" "),n("XUICollapse",{staticClass:"options-collapse",model:{value:t.activePanel,callback:function(e){t.activePanel=e},expression:"activePanel"}},[n("XUIPanel",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.nodeInfo).length&&Object.keys(t.propsMap).length,expression:"Object.keys(nodeInfo).length && Object.keys(propsMap).length"}],attrs:{name:"propsMap"}},[t._v("\n        props\n        "),Object.keys(t.nodeInfo).length?n("XUIForm",{ref:"propsMapForm",staticClass:"options-body",attrs:{slot:"content",model:t.propsMap,rules:t.propsMapRules,"label-width":80},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},slot:"content"},t._l(t.propsMap,function(e,o){return n("XUIFormItem",{key:o,staticClass:"options-item",attrs:{label:o,prop:o}},[t.utils.getTypeIndex(Boolean,t.vm.$options.props[o].type)>-1?n("XUISwitch",{model:{value:t.propsMap[o],callback:function(e){t.$set(t.propsMap,o,e)},expression:"propsMap[key]"}}):t.utils.getTypeIndex(Number,t.vm.$options.props[o].type)>-1?n("XUIInputNumber",{model:{value:t.propsMap[o],callback:function(e){t.$set(t.propsMap,o,e)},expression:"propsMap[key]"}}):(t.utils.getTypeIndex(String,t.vm.$options.props[o].type),n("XUIInput",{attrs:{type:"text"},model:{value:t.propsMap[o],callback:function(e){t.$set(t.propsMap,o,e)},expression:"propsMap[key]"}}))],1)})):t._e()],1),t._v(" "),n("XUIPanel",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.nodeInfo).length&&Object.keys(t.slotsMap).length,expression:"Object.keys(nodeInfo).length && Object.keys(slotsMap).length"}],attrs:{name:"slotsMap"}},[t._v("\n        slots\n        "),Object.keys(t.nodeInfo).length?n("XUIForm",{staticClass:"options-body",attrs:{slot:"content"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},slot:"content"},t._l(t.slotsMap,function(e,o){return n("XUIFormItem",{key:o,staticClass:"options-item"},[n("XUIInput",{attrs:{type:"text"},model:{value:t.slotsMap[o],callback:function(e){t.$set(t.slotsMap,o,e)},expression:"slotsMap[key]"}})],1)})):t._e()],1),t._v(" "),n("XUIPanel",{attrs:{name:"innerHTML"}},[t._v("\n        innerHTML\n        "),Object.keys(t.nodeInfo).length?n("XUIForm",{staticClass:"options-body",attrs:{slot:"content"},on:{click:function(t){t.stopPropagation(),t.preventDefault()}},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;e.preventDefault()}},slot:"content"},[n("XUIFormItem",{staticClass:"options-item"},[n("XUIInput",{attrs:{type:"text"},model:{value:t.innerHTML,callback:function(e){t.innerHTML=e},expression:"innerHTML"}})],1)],1):t._e()],1),t._v(" "),n("XUIPanel",{attrs:{name:"style"}},[t._v("\n        style\n        "),Object.keys(t.nodeInfo).length?n("div",{staticClass:"options-body",attrs:{slot:"content"},slot:"content"},[n("XUIForm",{staticClass:"options-body",on:{click:function(t){t.stopPropagation(),t.preventDefault()}}},[n("XUIFormItem",{staticClass:"options-item"},[n("XUIInput",{attrs:{type:"textarea",rows:4,autosize:!0,placeholder:"请输入样式！"},model:{value:t.style,callback:function(e){t.style=e},expression:"style"}})],1)],1)],1):t._e()])],1)],1),t._v(" "),n("XFCHandler",{staticClass:"handler",attrs:{mode:"vertical",position:"left",expand:t.isExpand,callback:t.toggleHandler}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"block_header"},[e("div",{staticClass:"title"},[this._v("\n      Options\n    ")])])}]};var Q=n("VU/8")(K,J,!1,function(t){n("hVG5")},"data-v-09930b1e",null).exports,Z={name:"XFCFooter",components:{XFCHandler:s},props:{config:{type:Object,default:function(){return F.UI.footer}}},data:function(){return{isExpand:!0}},methods:{toggleHandler:function(t){var e=this;e.isExpand=void 0!==t?t:!e.isExpand,e.$nextTick(function(){var t=e.isExpand?e.$el.offsetHeight:0;y.bus.$emit("XFC/expand/toggle/single",{position:"bottom",val:{bottom:t}})})}},created:function(){var t=this;y.bus.$on("XFC/expand/toggle/all",function(e){t.toggleHandler(e)})}},tt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{class:{xfc_footer:!0,block_expand:this.isExpand}},[e("div",{staticClass:"block_body"},[e("XUIButton",{attrs:{type:"primary"}},[this._v("SAVE")])],1),this._v(" "),e("XFCHandler",{staticClass:"handler",attrs:{mode:"horizontal",position:"top",expand:this.isExpand,callback:this.toggleHandler}})],1)},staticRenderFns:[]};var et=n("VU/8")(Z,tt,!1,function(t){n("QDuJ")},"data-v-e3760fb8",null).exports,nt={name:"ContextMenuItem",props:{info:{type:Object,required:!0}},methods:{triggerMenuItem:function(){var t=this;console.log("triggerMenuItem",t.info.text,t.info.name);var e=void 0;if(t.info&&t.info.action&&t.info.action.type&&t.info.action.handler){switch(t.info.action.type){case"bus":e=function(){y.bus.$emit(t.info.action.handler,t.info.action.params)};break;case"callback":e=function(){t.info.action.handler&&"function"==typeof t.info.action.handler&&t.info.action.handler(t.info.action.params)}}(!t.info.action.beforeTrigger||"function"!=typeof t.info.action.beforeTrigger||t.info.action.beforeTrigger())&&e(),t.info.action.afterTrigger&&"function"==typeof t.info.action.afterTrigger&&t.info.action.afterTrigger()}y.bus.$emit("XFC/contextMenu/hide")}}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.info.enable?n("div",{staticClass:"context-menu-item",style:t.info.style,attrs:{name:t.info.name},on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.triggerMenuItem(e)}}},[t.info.icon&&"iview"===t.info.icon.category?n("XUIIcon",{staticClass:"context-menu-icon",style:t.info.icon.style,attrs:{type:t.info.icon.type}}):t._e(),t._v(" "),t.info.icon&&"iconfont"===t.info.icon.category?n("i",{class:["context-menu-icon","iconfont",t.info.icon.type],style:t.info.icon.style,attrs:{title:t.info.text}}):t._e(),t._v(" "),n("div",{staticClass:"context-menu-label"},[n("div",{staticClass:"context-menu-label-text"},[t._v(t._s(t.info.text))]),t._v(" "),t.info.children&&t.info.children.length?n("i",{class:["context-menu-icon-child","iconfont","icon-arrow-right"]}):t._e()]),t._v(" "),t._t("child")],2):t._e()},staticRenderFns:[]};var at={name:"XFCContextMenu",components:{ContextMenuItem:n("VU/8")(nt,ot,!1,function(t){n("1H4q")},"data-v-c24b4606",null).exports},data:function(){return{contextMenuInfo:{x:0,y:0,isShow:!1}}},computed:{contextMenuStyle:function(){var t=this,e=void 0!==t.contextMenuInfo.x&&parseInt(t.contextMenuInfo.x)>0?parseInt(t.contextMenuInfo.x):0,n=void 0!==t.contextMenuInfo.y&&parseInt(t.contextMenuInfo.y)>0?parseInt(t.contextMenuInfo.y):0,o={};if(document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth){var a=document.documentElement.clientHeight;e+200>document.documentElement.clientWidth?o.right="10px":o.left=e+"px",n+100>a?o.bottom="42px":o.top=n+"px"}return o}},created:function(){var t=this;y.bus.$on("XFC/contextMenu/show",function(e){console.log("contextMenu show data",e),e&&(t.contextMenuInfo=e),t.contextMenuInfo.isShow=!0}),y.bus.$on("XFC/contextMenu/hide",function(e){console.log("contextMenu hide data",e),t.contextMenuInfo={x:0,y:0,isShow:!1}})},beforeDestroy:function(){y.bus.$off(["XFC/contextMenu/show","XFC/contextMenu/hide"])}},it={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.contextMenuInfo.isShow?n("div",{staticClass:"xfc-context-menu",style:t.contextMenuStyle,on:{mousedown:function(t){t.stopPropagation(),t.preventDefault()},click:function(t){t.stopPropagation(),t.preventDefault()}}},t._l(t.contextMenuInfo.list,function(e,o){return t.contextMenuInfo.list&&t.contextMenuInfo.list.length?n("ContextMenuItem",{key:o,attrs:{info:e}},[e.children&&e.children.length?n("div",{staticClass:"context-menu-child",style:e.childrenStyle,attrs:{slot:"child"},slot:"child"},t._l(e.children,function(t){return n("ContextMenuItem",{key:t.name,attrs:{info:t}})})):t._e()]):t._e()})):t._e()},staticRenderFns:[]};var st={name:"XFC",components:{XFCHeader:T,XFCList:$,XFCBoard:W,XFCOptions:Q,XFCFooter:et,XFCContextMenu:n("VU/8")(at,it,!1,function(t){n("/UwT")},null,null).exports},props:{config:{type:Object,default:function(){return F}}},data:function(){return{defConfig:F,mergeConfig:{},projectList:[]}},methods:{init:function(){this.renderUI()},renderUI:function(){this.mergeConfig=y.mergeObject(this.defConfig,this.config)},handleMouseDown:function(){y.bus.$emit("XFC/contextMenu/hide")}},created:function(){this.init()}},rt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"xfc",attrs:{id:"xfc"},on:{contextmenu:function(t){t.stopPropagation(),t.preventDefault()},mousedown:function(e){return e.stopPropagation(),t.handleMouseDown(e)}}},[t.mergeConfig.UI.header.enable?t._t("header",[n("XFCHeader",{attrs:{config:t.mergeConfig.UI.header}})]):t._e(),t._v(" "),t.mergeConfig.UI.list.enable?t._t("list",[n("XFCList",{attrs:{config:t.mergeConfig.UI.list}},[t._t("listItem")],2)]):t._e(),t._v(" "),t.mergeConfig.UI.board.enable?t._t("board",[n("XFCBoard",{attrs:{config:t.mergeConfig.UI.board}})]):t._e(),t._v(" "),t.mergeConfig.UI.options.enable?t._t("options",[n("XFCOptions",{attrs:{config:t.mergeConfig.UI.options}})]):t._e(),t._v(" "),t.mergeConfig.UI.footer.enable?t._t("footer",[n("XFCFooter",{attrs:{config:t.mergeConfig.UI.footer}})]):t._e(),t._v(" "),n("XFCContextMenu")],2)},staticRenderFns:[]};var ct=n("VU/8")(st,rt,!1,function(t){n("XSR4")},"data-v-2c66ae04",null).exports,lt={name:"XFCIcon",props:{type:{type:String,required:!0}},data:function(){return{className:{main:"iconfont",prefix:"icon-"}}},computed:{classNameList:function(){var t=this.type?this.className.prefix+this.type:"";return[this.className.main,t]}}},pt={render:function(){var t=this.$createElement;return(this._self._c||t)("i",{class:this.classNameList})},staticRenderFns:[]};var ut=n("VU/8")(lt,pt,!1,function(t){n("1dWW")},"data-v-0a35961b",null).exports,dt=(n("1rAC"),{});dt.installed=!1,dt.install=function(t){dt.installed||(t.component("XUIButton",o.Button),t.component("XUIIcon",o.Icon),t.component("XUIForm",o.Form),t.component("XUIFormItem",o.FormItem),t.component("XUIModal",o.Modal),t.component("XUIInput",o.Input),t.component("XUIInputNumber",o.InputNumber),t.component("XUIRadioGroup",o.RadioGroup),t.component("XUIRadio",o.Radio),t.component("XUISwitch",o.Switch),t.component("XUICollapse",o.Collapse),t.component("XUIPanel",o.Panel),t.component("XUISpin",o.Spin),t.component("XUITooltip",o.Tooltip),t.component("XFlowchart",ct),t.component("XFCIcon",ut),dt.installed=!0)},"undefined"!=typeof window&&window.Vue&&window.Vue.use(dt);e.a=dt},ll1s:function(t,e){},pwV8:function(t,e,n){"use strict";var o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("div",{staticClass:"x-flowchart-example"},[e("XFlowchart")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"https://github.com/OXOYO/X-Flowchart-Vue",target:"_blank"}},[e("img",{staticStyle:{position:"absolute",top:"0",right:"0",border:"0","z-index":"5000"},attrs:{src:"https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png",alt:"Fork me on GitHub"}})])}]};var a=n("VU/8")({name:"App"},o,!1,function(t){n("bSvY")},null,null);e.a=a.exports},qy2H:function(t,e){}},["SrUm"]);
//# sourceMappingURL=app.5399961121d1c27274cd.js.map